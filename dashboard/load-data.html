<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta lang="ja" />
    <title>データの更新</title>
</head>
<body>
    <p>更新ボタンを押すとすべてのJSONファイルを再読み込みし、関連するすべての画面において情報を更新して画面に反映します。</p>
    <p>更新後のデータは、タイトルと発表者名は即座に、それ以外の切り替わる情報はアニメーションの切り替わり時に反映されます。</p>
    <form onsubmit="return updateData();">
        <input type="submit" value="更新" />
    </form>
</body>
<script type="text/javascript">
const presentationReplicant = nodecg.Replicant("presentationData", {
    defaultValue: []
});

const noticeReplicant = nodecg.Replicant("noticeData", {
    defaultValue: []
});

window.onload = function() {
    if (presentationReplicant.value.length == 0 || noticeReplicant.value.length == 0) {
        updateData();
    }
}

function updateData() {
    nodecg.sendMessage("reloadData");
}
</script>
</html>
